{"ast":null,"code":"import _classCallCheck from \"/Users/patrickneff/Documents/code/Pad-holder-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/patrickneff/Documents/code/Pad-holder-app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/patrickneff/Documents/code/Pad-holder-app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/patrickneff/Documents/code/Pad-holder-app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/patrickneff/Documents/code/Pad-holder-app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/patrickneff/Documents/code/Pad-holder-app/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/patrickneff/Documents/code/Pad-holder-app/client/src/components/Work/work.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./work.css\";\nimport API from \"../utils/API\";\n\nvar Work =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Work, _Component);\n\n  function Work() {\n    var _this;\n\n    _classCallCheck(this, Work);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Work).call(this));\n\n    _this.string_to_array = function (str) {\n      return str.trim().split(\", \");\n    };\n\n    _this.state = {\n      seconds: '00',\n      roundMinutes: '3',\n      breakMinutes: '1',\n      round: '1',\n      work: true,\n      combo: '',\n      strikes: -1,\n      clockRunning: true // method that triggers the countdown functionality\n\n    };\n    _this.startCountDown = _this.startCountDown.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.breakTick = _this.breakTick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.roundTick = _this.roundTick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.round = _this.round.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.break = _this.break.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.display = _this.display.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getCombo = _this.getCombo.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.pause = _this.pause.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } // Starts timer\n\n\n  _createClass(Work, [{\n    key: \"startCountDown\",\n    value: function startCountDown() {\n      this.round();\n      this.roundNumber = 1;\n      this.setState({\n        clockRunning: true\n      });\n    } // Starts Round\n\n  }, {\n    key: \"round\",\n    value: function round() {\n      if (this.state.clockRunning) {\n        this.intervalHandle = setInterval(this.roundTick, 1000);\n        var time = this.state.roundMinutes;\n        this.secondNumber = time * 60;\n        this.callCombos();\n      }\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      clearInterval(this.intervalHandle);\n\n      if (this.state.clockRunning) {\n        this.setState({\n          clockRunning: false\n        });\n      } else {\n        this.setState({\n          clockRunning: true\n        });\n      }\n    } // Combo random timer\n\n  }, {\n    key: \"callCombos\",\n    value: function callCombos() {\n      var rand = Math.round(Math.random() * (6000 - 2500)) + 2500;\n      this.comboHandle = setTimeout(this.getCombo, rand);\n      this.speak();\n    }\n  }, {\n    key: \"getCombo\",\n    // API call to get combos\n    value: function getCombo() {\n      var _this2 = this;\n\n      if (this.state.work) {\n        API.findAll().then(function (res) {\n          return _this2.setState({\n            combo: res.data.combo\n          });\n        }).catch(function (err) {\n          return console.log(err);\n        });\n        this.callCombos();\n        this.totalStrikes();\n      } else {\n        this.setState({\n          combo: 'Break'\n        });\n      }\n    } // Makes minutes and seconds go down\n\n  }, {\n    key: \"roundTick\",\n    value: function roundTick() {\n      var min = Math.floor(this.secondNumber / 60);\n      var sec = this.secondNumber - min * 60;\n      var round = this.roundNumber;\n      this.setState({\n        roundMinutes: min,\n        seconds: sec,\n        round: round,\n        work: true\n      });\n\n      if (sec < 10) {\n        this.setState({\n          seconds: \"0\" + this.state.seconds\n        });\n      }\n\n      if (min < 10) {\n        this.setState({\n          value: \"0\" + min\n        });\n      }\n\n      if (min === 0 & sec === 0) {\n        clearInterval(this.intervalHandle);\n        this.toggle();\n        this.setState({\n          roundMinutes: '3'\n        });\n      }\n\n      this.secondNumber--;\n    } // Break functions\n\n  }, {\n    key: \"break\",\n    value: function _break() {\n      if (this.state.clockRunning) {\n        this.intervalHandle = setInterval(this.breakTick, 1000);\n        var time = this.state.breakMinutes;\n        this.secondNumber = time * 60;\n      }\n    }\n  }, {\n    key: \"breakTick\",\n    value: function breakTick() {\n      var min = Math.floor(this.secondNumber / 60);\n      var sec = this.secondNumber - min * 60;\n      var round = this.roundNumber;\n      this.setState({\n        breakMinutes: min,\n        seconds: sec,\n        round: round,\n        work: false\n      });\n\n      if (sec < 10) {\n        this.setState({\n          seconds: \"0\" + this.state.seconds\n        });\n      }\n\n      if (min < 10) {\n        this.setState({\n          value: \"0\" + min\n        });\n      }\n\n      if (min === 0 & sec === 0) {\n        clearInterval(this.intervalHandle);\n        this.roundNumber++;\n        this.round();\n        this.setState({\n          breakMinutes: '1'\n        });\n      }\n\n      this.secondNumber--;\n    } // Displays Round or Break\n\n  }, {\n    key: \"display\",\n    value: function display() {\n      if (this.state.work === true) {\n        return \"Round \".concat(this.state.round, \" of 5\");\n      } else {\n        return 'Break';\n      }\n    } // Decides Round or break for minutes\n\n  }, {\n    key: \"clockMinutes\",\n    value: function clockMinutes() {\n      if (this.state.work === true) {\n        return this.state.roundMinutes;\n      } else {\n        return this.state.breakMinutes;\n      }\n    } // End session after last round or go to break in between rounds\n\n  }, {\n    key: \"toggle\",\n    value: function toggle() {\n      if (this.roundNumber === 5) {\n        this.endSession();\n      } else {\n        this.break();\n      }\n    } // End session\n\n  }, {\n    key: \"endSession\",\n    value: function endSession() {\n      console.log(\"end session\");\n      clearInterval(this.intervalHandle);\n      window.location.href = \"/Stats\";\n    } // Add strikes based on combos called\n\n  }, {\n    key: \"totalStrikes\",\n    value: function totalStrikes() {\n      var arr = this.string_to_array(this.state.combo);\n      var length = arr.length;\n      this.setState({\n        strikes: this.state.strikes + length\n      });\n    } // string to array\n\n  }, {\n    key: \"displayPositiveStrikes\",\n    // Solution to get around intitial 1-index array\n    value: function displayPositiveStrikes() {\n      if (this.state.strikes > 0) {\n        return this.state.strikes;\n      }\n    } // speech function?\n\n  }, {\n    key: \"speak\",\n    value: function speak() {\n      var msg = new SpeechSynthesisUtterance();\n      msg.text = this.state.combo;\n      speechSynthesis.cancel();\n      speechSynthesis.speak(msg);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        class: \"bg-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"jumbotron jumbotron-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        class: \"display-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"Work!\"), React.createElement(\"p\", {\n        class: \"lead text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"Throw your combos as they're called out!\"))), React.createElement(\"div\", {\n        class: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"round col-sm-4 text-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"bg-success text-light rounded\",\n        onClick: this.startCountDown,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, \"Start\")))), React.createElement(\"div\", {\n        class: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"round col-sm-4 text-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"bg-danger text-light rounded\",\n        onClick: this.pause,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, \"Pause\")))), React.createElement(\"div\", {\n        class: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card card1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        class: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"Current Combo\"), React.createElement(\"p\", {\n        class: \"card-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, this.state.combo)))), React.createElement(\"div\", {\n        className: \"col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card card2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        class: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, \"Total Strikes:\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        class: \"card-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, this.displayPositiveStrikes())))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        class: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"round col-sm-4 text-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, this.display()))), React.createElement(\"div\", {\n        class: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"round col-sm-4 text-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, this.clockMinutes(), \":\", this.state.seconds), React.createElement(Link, {\n        to: \"/Stats\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"bg-danger text-light rounded\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, \"Finish\")))))));\n    }\n  }]);\n\n  return Work;\n}(Component);\n\nexport default Work;","map":{"version":3,"sources":["/Users/patrickneff/Documents/code/Pad-holder-app/client/src/components/Work/work.js"],"names":["React","Component","Link","API","Work","string_to_array","str","trim","split","state","seconds","roundMinutes","breakMinutes","round","work","combo","strikes","clockRunning","startCountDown","bind","breakTick","roundTick","break","display","getCombo","pause","roundNumber","setState","intervalHandle","setInterval","time","secondNumber","callCombos","clearInterval","rand","Math","random","comboHandle","setTimeout","speak","findAll","then","res","data","catch","err","console","log","totalStrikes","min","floor","sec","value","toggle","endSession","window","location","href","arr","length","msg","SpeechSynthesisUtterance","text","speechSynthesis","cancel","displayPositiveStrikes","clockMinutes"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./work.css\";\nimport API from \"../utils/API\";\n\n\nclass Work extends Component {\n    constructor() {\n        super();\n   this.state = {\n     seconds: '00', \n     roundMinutes: '3',\n     breakMinutes: '1',\n     round: '1',\n     work: true,\n     combo: '',\n     strikes: -1,\n     clockRunning: true\n   }\n   // method that triggers the countdown functionality\n   this.startCountDown = this.startCountDown.bind(this);\n   this.breakTick = this.breakTick.bind(this);\n   this.roundTick = this.roundTick.bind(this);\n   this.round = this.round.bind(this);\n   this.break = this.break.bind(this);\n   this.display = this.display.bind(this);\n   this.getCombo = this.getCombo.bind(this);\n   this.pause = this.pause.bind(this);\n   }\n\n    // Starts timer\n    startCountDown() {\n        this.round();\n        this.roundNumber = 1;\n        this.setState({\n            clockRunning: true\n        })\n    }\n    // Starts Round\n    round() {\n        if (this.state.clockRunning) {\n            this.intervalHandle = setInterval(this.roundTick, 1000);\n            let time = this.state.roundMinutes;\n            this.secondNumber = time * 60;\n            this.callCombos();\n        }\n    }\n\n    pause() {\n        clearInterval(this.intervalHandle);\n        \n        if (this.state.clockRunning) {\n            this.setState({ clockRunning: false })\n        } else {\n            this.setState({ clockRunning: true })\n        }\n    }\n\n    // Combo random timer\n    callCombos() {\n        var rand = Math.round(Math.random() * (6000 - 2500)) + 2500;\n        this.comboHandle = setTimeout(this.getCombo, rand);\n        this.speak();\n    };\n\n    // API call to get combos\n    getCombo() {\n        if (this.state.work) {\n            API.findAll()\n        .then(res => \n            this.setState({ \n                combo: res.data.combo,\n            }))\n        .catch(err => console.log(err));\n        this.callCombos();\n        this.totalStrikes();\n        } else {\n            this.setState({ combo: 'Break' })\n        }\n        \n    }\n    \n    // Makes minutes and seconds go down\n    roundTick() {\n        var min = Math.floor(this.secondNumber / 60);\n        var sec = this.secondNumber - (min * 60);\n        var round = this.roundNumber;\n        this.setState({\n            roundMinutes: min,\n            seconds: sec,\n            round: round,\n            work: true\n        })\n        if (sec < 10) {\n            this.setState({\n            seconds: \"0\" + this.state.seconds,\n            })\n        }\n        if (min < 10) {\n        this.setState({\n            value: \"0\" + min,\n            })\n        }\n        if (min === 0 & sec === 0) {\n        clearInterval(this.intervalHandle);\n            this.toggle();\n            this.setState({\n                roundMinutes: '3'\n            })\n        }\n            this.secondNumber--;\n    }\n\n    // Break functions\n    break() {\n        if (this.state.clockRunning) {\n            this.intervalHandle = setInterval(this.breakTick, 1000);\n            let time = this.state.breakMinutes;\n            this.secondNumber = time * 60;\n        }\n    }\n    breakTick() {\n        var min = Math.floor(this.secondNumber / 60);\n        var sec = this.secondNumber - (min * 60);\n        var round = this.roundNumber;\n        this.setState({\n            breakMinutes: min,\n            seconds: sec,\n            round: round,\n            work: false,\n        })\n        if (sec < 10) {\n            this.setState({\n            seconds: \"0\" + this.state.seconds,\n            })\n        }\n        if (min < 10) {\n        this.setState({\n            value: \"0\" + min,\n            })\n        }\n        if (min === 0 & sec === 0) {\n        clearInterval(this.intervalHandle);\n            this.roundNumber++;\n            this.round();\n            this.setState({\n                breakMinutes: '1'\n            })\n        }\n            this.secondNumber--\n    }\n    // Displays Round or Break\n    display() {\n       if (this.state.work === true) {\n           return `Round ${this.state.round} of 5`;\n       } else {\n            return 'Break';\n       }\n    }\n    // Decides Round or break for minutes\n    clockMinutes() {\n        if (this.state.work === true) {\n            return this.state.roundMinutes;\n        } else {\n            return this.state.breakMinutes;\n        }\n    }\n    // End session after last round or go to break in between rounds\n    toggle() {\n        if (this.roundNumber === 5) {\n            this.endSession()\n        }\n        else {\n            this.break();\n        }\n    }\n\n    // End session\n    endSession() {\n        console.log(\"end session\");\n        clearInterval(this.intervalHandle);\n        window.location.href=\"/Stats\";\n    }\n    \n\n    // Add strikes based on combos called\n    totalStrikes() {\n       const arr = this.string_to_array(this.state.combo);\n       const length = arr.length;\n            this.setState({ strikes: this.state.strikes + length });\n    }\n    \n    // string to array\n    string_to_array = function (str) {\n        return str.trim().split(\", \");\n   };\n\n    // Solution to get around intitial 1-index array\n    displayPositiveStrikes() {\n        if (this.state.strikes > 0) {\n            return this.state.strikes;\n        }\n    }\n\n    // speech function?\n    speak() {\n        const msg = new SpeechSynthesisUtterance();\n        msg.text = this.state.combo;\n        speechSynthesis.cancel();\n        speechSynthesis.speak(msg);\n    }\n    render() {\n        return (\n            <div class=\"bg-dark\">\n        <div class=\"jumbotron jumbotron-fluid\">\n            <div class=\"container\">\n                <h1 class=\"display-4\">Work!</h1>\n                <p class=\"lead text-danger\">Throw your combos as they're called out!</p>\n            </div>\n        </div>\n        <div class=\"container\">\n            <div class=\"row\">\n                <div className=\"round col-sm-4 text-light\">\n                    <button className=\"bg-success text-light rounded\" onClick={this.startCountDown}>Start</button>\n                </div>\n            </div>\n        </div>\n        <div class=\"container\">\n            <div class=\"row\">\n                <div className=\"round col-sm-4 text-light\">\n                    <button className=\"bg-danger text-light rounded\" onClick={this.pause}>Pause</button>\n                </div>\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div className=\"col-6\">\n                <div className=\"card card1\">\n                    <div className=\"card-body\">\n                        <h5 class=\"card-title\">Current Combo</h5>\n                        <p class=\"card-text\">{this.state.combo}</p>\n                    </div>\n                </div>\n            </div>\n            <div className=\"col-6\">\n                <div className=\"card card2\">\n                    <div className=\"card-body\">\n                        <h5 class=\"card-title\">Total Strikes:</h5>\n                        <br/>\n                        <p class=\"card-text\">{this.displayPositiveStrikes()}</p>\n                    </div>\n                </div>\n            </div>\n            <br/>\n            <div class=\"container\">\n                <div class=\"row\">\n                    <div className=\"round col-sm-4 text-light\">\n                        <h3>{this.display()}</h3>\n                    </div>\n                </div>\n                <div class=\"row\">\n                <div className=\"round col-sm-4 text-light\">\n                    <h2>{this.clockMinutes()}:{this.state.seconds}</h2>\n                    <Link to=\"/Stats\"><button className=\"bg-danger text-light rounded\">Finish</button></Link>\n                </div>\n                </div>\n            </div>\n        </div>\n    </div>\n        )\n    }\n}\n\n\n\n\n\nexport default Work;"]},"metadata":{},"sourceType":"module"}